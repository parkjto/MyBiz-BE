<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyBiz 백엔드 API 테스트 결과</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
        .container { max-width: 1200px; margin: 0 auto; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .header { text-align: center; color: #333; margin-bottom: 30px; }
        .result-section { margin: 20px 0; padding: 20px; border: 1px solid #ddd; border-radius: 8px; }
        .image-comparison { display: flex; gap: 20px; margin: 20px 0; }
        .image-box { flex: 1; text-align: center; }
        .image-box img { max-width: 100%; height: auto; border: 2px solid #ddd; border-radius: 8px; }
        .stats { background: #f8f9fa; padding: 15px; border-radius: 5px; margin: 15px 0; }
        .warning { background: #fff3cd; border: 1px solid #ffeaa7; color: #856404; padding: 15px; border-radius: 5px; margin: 15px 0; }
        .success { background: #d4edda; border: 1px solid #c3e6cb; color: #155724; padding: 15px; border-radius: 5px; margin: 15px 0; }
        .api-test { background: #e2e3e5; padding: 15px; border-radius: 5px; margin: 15px 0; }
        .btn { background: #007bff; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; margin: 5px; }
        .btn:hover { background: #0056b3; }
        .btn-success { background: #28a745; }
        .btn-warning { background: #ffc107; color: #212529; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🚀 MyBiz 백엔드 API 테스트 결과</h1>
            <p>이미지 보정 및 광고 문구 생성 API 테스트</p>
        </div>

        <div class="result-section">
            <h2>✅ 이미지 보정 API 테스트 완료</h2>
            <div class="success">
                <strong>API 엔드포인트:</strong> POST /api/ad/enhance-image<br>
                <strong>상태:</strong> 성공적으로 완료됨
            </div>
            
            <div class="image-comparison">
                <div class="image-box">
                    <h3>원본 이미지</h3>
                    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg==" alt="원본 이미지" style="width: 300px; height: 200px; background: #f0f0f0; display: flex; align-items: center; justify-content: center;">
                    <p>원본 이미지 (image.png)</p>
                </div>
                <div class="image-box">
                    <h3>보정된 이미지</h3>
                    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg==" alt="보정된 이미지" style="width: 300px; height: 200px; background: #f0f0f0; display: flex; align-items: center; justify-content: center;">
                    <p>보정된 이미지 (WebP)</p>
                </div>
            </div>

            <div class="stats">
                <h3>📊 이미지 처리 통계</h3>
                <ul>
                    <li><strong>원본 크기:</strong> 1,075,155 bytes (약 1MB)</li>
                    <li><strong>보정 후 크기:</strong> 92,590 bytes (약 90KB)</li>
                    <li><strong>압축률:</strong> 약 91% 감소</li>
                    <li><strong>출력 형식:</strong> WebP (품질 88%)</li>
                </ul>
            </div>

            <div class="warning">
                <h3>⚠️ 중요 안내사항</h3>
                <p><strong>보정된 이미지는 서버에 저장되지 않습니다!</strong></p>
                <p>사용자가 직접 핸드폰 앨범, 파일 등에 저장해야 합니다.</p>
                <p>서버에서는 어떤 이미지도 저장하지 않는 완전한 무상태(Stateless) 방식입니다.</p>
            </div>
        </div>

        <div class="result-section">
            <h2>🔧 수행된 이미지 보정 작업</h2>
            <ul>
                <li>✅ 자동 회전 (EXIF 데이터 기반)</li>
                <li>✅ 리사이즈 (최대 1600px 기준)</li>
                <li>✅ 대비/밝기 정규화</li>
                <li>✅ 채도 향상 (약간의 밝기/채도 증가)</li>
                <li>✅ 샤프닝 (선명도 향상)</li>
                <li>✅ WebP 변환 (품질 88%)</li>
            </ul>
        </div>

        <div class="result-section">
            <h2>🧪 다음 API 테스트</h2>
            <div class="api-test">
                <h3>1. 텍스트 기반 광고 문구 생성</h3>
                <p><strong>엔드포인트:</strong> POST /api/ad/generate</p>
                <p><strong>기능:</strong> 제품명, 설명, 키워드로 광고 문구 생성</p>
                <button class="btn btn-success" onclick="testTextAPI()">텍스트 API 테스트</button>
            </div>

            <div class="api-test">
                <h3>2. 이미지 기반 광고 문구 생성</h3>
                <p><strong>엔드포인트:</strong> POST /api/ad/generate-from-image</p>
                <p><strong>기능:</strong> 이미지 URL + 텍스트로 맞춤 광고 문구 생성</p>
                <button class="btn btn-warning" onclick="testImageAPI()">이미지 API 테스트</button>
            </div>

            <div class="api-test">
                <h3>3. 통합 이미지 업로드 + 보정 + 광고</h3>
                <p><strong>엔드포인트:</strong> POST /api/ad/generate-with-image</p>
                <p><strong>기능:</strong> 이미지 업로드 → 보정 → 광고 문구 생성 (일괄 처리)</p>
                <button class="btn btn-success" onclick="testIntegratedAPI()">통합 API 테스트</button>
            </div>
        </div>

        <div class="result-section">
            <h2>📱 사용자 액션 가이드</h2>
            <div class="warning">
                <h3>Base64 이미지 저장 방법</h3>
                <ol>
                    <li>API 응답의 Base64 데이터를 복사</li>
                    <li>온라인 Base64 to Image 변환기 사용</li>
                    <li>변환된 이미지를 다운로드</li>
                    <li>핸드폰 앨범이나 원하는 폴더에 저장</li>
                </ol>
                <p><strong>참고:</strong> 서버에서는 어떤 데이터도 저장하지 않으므로 사용자가 직접 관리해야 합니다.</p>
            </div>
        </div>
    </div>

    <script>
        function testTextAPI() {
            alert('텍스트 기반 광고 문구 생성 API 테스트를 진행합니다.\n\ncURL 명령어:\ncurl -X POST http://localhost:3000/api/ad/generate \\\n  -H "Content-Type: application/json" \\\n  -d \'{"productName": "마이비 치킨", "productDesc": "겉바속촉, 매콤달콤 양념", "keywords": ["치킨", "야식", "배달"], "num": 4, "maxWords": 14}\'');
        }

        function testImageAPI() {
            alert('이미지 기반 광고 문구 생성 API 테스트를 진행합니다.\n\ncURL 명령어:\ncurl -X POST http://localhost:3000/api/ad/generate-from-image \\\n  -H "Content-Type: application/json" \\\n  -d \'{"imageUrl": "https://example.com/image.jpg", "productName": "마이비 치킨", "productDesc": "겉바속촉, 매콤달콤 양념", "keywords": ["치킨", "야식", "배달"], "num": 3, "maxWords": 16}\'');
        }

        function testIntegratedAPI() {
            alert('통합 이미지 업로드 + 보정 + 광고 API 테스트를 진행합니다.\n\ncURL 명령어:\ncurl -X POST http://localhost:3000/api/ad/generate-with-image \\\n  -F "image=@image.png" \\\n  -F "productName=마이비 치킨" \\\n  -F "productDesc=겉바속촉, 매콤달콤 양념" \\\n  -F "keywords=치킨,야식,배달" \\\n  -F "num=3" \\\n  -F "maxWords=16"');
        }
    </script>
</body>
</html>
